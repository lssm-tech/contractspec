@import 'tailwindcss/theme.css' layer(theme);
@import 'tailwindcss/preflight.css' layer(base);
@import 'tailwindcss/utilities.css';

@import 'nativewind/theme';

@config '../tailwind.config.js';

@layer base {
  :root {
    /* Base neutrals */
    --background: 0 0% 100%;
    --foreground: 222 47% 11%;
    --card: 0 0% 100%;
    --card-foreground: 222 47% 11%;
    --muted: 210 20% 96%;
    --muted-foreground: 222 10% 40%;
    --border: 214 32% 91%;
    --input: 214 32% 91%;

    /* Brand anchors */
    --primary: 216 83% 34%; /* #0F49A0 */
    --primary-foreground: 0 0% 100%;
    --accent: 185 38% 59%; /* #70B8BF */
    --accent-foreground: 222 47% 11%;

    /* Secondary (neutral alt button/surface) */
    --secondary: var(--muted);
    --secondary-foreground: var(--foreground);

    /* Status colors (pick stable, accessible anchors) */
    --success: 142 72% 35%; /* deep green */
    --success-foreground: 0 0% 100%;
    --warning: 38 92% 50%; /* amber */
    --warning-foreground: 222 47% 11%;
    --destructive: 0 72% 50%; /* red */
    --destructive-foreground: 0 0% 100%;

    /* Soft + border roles (fallback via alpha) */
    --primary-soft: hsl(var(--primary) / 0.12);
    --primary-border: hsl(var(--primary) / 0.35);
    --accent-soft: hsl(var(--accent) / 0.18);
    --accent-border: hsl(var(--accent) / 0.35);
    --secondary-soft: hsl(var(--secondary) / 1); /* same as muted surface */
    --secondary-border: hsl(214 32% 85%);
    --success-soft: hsl(var(--success) / 0.12);
    --success-border: hsl(var(--success) / 0.35);
    --warning-soft: hsl(var(--warning) / 0.12);
    --warning-border: hsl(var(--warning) / 0.35);
    --destructive-soft: hsl(var(--destructive) / 0.12);
    --destructive-border: hsl(var(--destructive) / 0.35);

    /* Focus ring */
    --ring: var(--accent);
  }

  /* Prefer background-aware mixing when supported */
  @supports (color: color-mix(in oklch, white, black)) {
    :root {
      --primary-soft: color-mix(
        in oklch,
        hsl(var(--primary)) 15%,
        hsl(var(--background))
      );
      --primary-border: color-mix(
        in oklch,
        hsl(var(--primary)) 35%,
        hsl(var(--background))
      );
      --accent-soft: color-mix(
        in oklch,
        hsl(var(--accent)) 18%,
        hsl(var(--background))
      );
      --accent-border: color-mix(
        in oklch,
        hsl(var(--accent)) 35%,
        hsl(var(--background))
      );
      --secondary-soft: color-mix(
        in oklch,
        hsl(var(--secondary)) 100%,
        hsl(var(--background))
      );
      --secondary-border: color-mix(
        in oklch,
        hsl(var(--foreground)) 15%,
        hsl(var(--background))
      );
      --success-soft: color-mix(
        in oklch,
        hsl(var(--success)) 18%,
        hsl(var(--background))
      );
      --success-border: color-mix(
        in oklch,
        hsl(var(--success)) 35%,
        hsl(var(--background))
      );
      --warning-soft: color-mix(
        in oklch,
        hsl(var(--warning)) 18%,
        hsl(var(--background))
      );
      --warning-border: color-mix(
        in oklch,
        hsl(var(--warning)) 35%,
        hsl(var(--background))
      );
      --destructive-soft: color-mix(
        in oklch,
        hsl(var(--destructive)) 18%,
        hsl(var(--background))
      );
      --destructive-border: color-mix(
        in oklch,
        hsl(var(--destructive)) 35%,
        hsl(var(--background))
      );
    }
  }

  /* Dark theme */
  .dark {
    --background: 222 47% 7%;
    --foreground: 0 0% 100%;
    --card: 222 47% 9%;
    --card-foreground: 0 0% 100%;
    --muted: 222 30% 16%;
    --muted-foreground: 220 15% 70%;
    --border: 222 25% 18%;
    --input: 222 25% 18%;

    --primary: 216 83% 34%;
    --primary-foreground: 0 0% 100%;
    --accent: 185 38% 59%;
    --accent-foreground: 222 47% 11%;

    --secondary: 222 30% 16%;
    --secondary-foreground: 0 0% 100%;

    --success: 142 72% 45%;
    --success-foreground: 0 0% 0%;
    --warning: 38 92% 56%;
    --warning-foreground: 0 0% 0%;
    --destructive: 0 72% 56%;
    --destructive-foreground: 0 0% 0%;

    --ring: var(--accent);
  }

  @supports (color: color-mix(in oklch, white, black)) {
    .dark {
      --primary-soft: color-mix(
        in oklch,
        hsl(var(--primary)) 22%,
        hsl(var(--background))
      );
      --primary-border: color-mix(
        in oklch,
        hsl(var(--primary)) 45%,
        hsl(var(--background))
      );
      --accent-soft: color-mix(
        in oklch,
        hsl(var(--accent)) 24%,
        hsl(var(--background))
      );
      --accent-border: color-mix(
        in oklch,
        hsl(var(--accent)) 45%,
        hsl(var(--background))
      );
      --secondary-soft: color-mix(
        in oklch,
        hsl(var(--secondary)) 100%,
        hsl(var(--background))
      );
      --secondary-border: color-mix(
        in oklch,
        hsl(var(--foreground)) 18%,
        hsl(var(--background))
      );
      --success-soft: color-mix(
        in oklch,
        hsl(var(--success)) 24%,
        hsl(var(--background))
      );
      --success-border: color-mix(
        in oklch,
        hsl(var(--success)) 45%,
        hsl(var(--background))
      );
      --warning-soft: color-mix(
        in oklch,
        hsl(var(--warning)) 24%,
        hsl(var(--background))
      );
      --warning-border: color-mix(
        in oklch,
        hsl(var(--warning)) 45%,
        hsl(var(--background))
      );
      --destructive-soft: color-mix(
        in oklch,
        hsl(var(--destructive)) 24%,
        hsl(var(--background))
      );
      --destructive-border: color-mix(
        in oklch,
        hsl(var(--destructive)) 45%,
        hsl(var(--background))
      );
    }
  }

  * {
    /*@apply border-border outline-ring/50;*/
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}
