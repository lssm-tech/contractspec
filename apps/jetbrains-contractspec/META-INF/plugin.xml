<idea-plugin>
  <idea-version since-build="243" until-build="262.*" />
  <version>0.0.1</version>
  <id>tech.lssm.contractspec</id>
  <name>ContractSpec</name>
  <vendor>lssm</vendor>
  <description><![CDATA[ContractSpec: spec-first development for AI-written software.
        Validate, scaffold, and explore your contract specifications.
    ]]><![CDATA[Spec-first development for AI-written software]]></description>
  <depends>com.intellij.modules.platform</depends>
  <depends>JavaScript</depends>
  <depends>com.intellij.css</depends>
  <extensions defaultExtensionNs="com.intellij">
    <!-- Tool Windows -->
    <toolWindow id="ContractSpec" anchor="right" icon="/icons/contractspec.svg" factoryClass="tech.lssm.contractspec.toolwindow.ContractSpecToolWindowFactory" conditionClass="tech.lssm.contractspec.toolwindow.ContractSpecToolWindowCondition" />
    <!-- Inspections -->
    <localInspection language="TypeScript" groupName="ContractSpec" shortName="ContractSpecStructure" displayName="ContractSpec Structure Validation" enabledByDefault="true" level="ERROR" implementationClass="tech.lssm.contractspec.inspections.ContractSpecStructureInspection" />
    <localInspection language="TypeScript" groupName="ContractSpec" shortName="ContractSpecIntegrity" displayName="ContractSpec Integrity Analysis" enabledByDefault="true" level="WARNING" implementationClass="tech.lssm.contractspec.inspections.ContractSpecIntegrityInspection" />
    <!-- Live Templates -->
    <defaultLiveTemplatesProvider implementation="tech.lssm.contractspec.templates.ContractSpecLiveTemplatesProvider" />
    <!-- Completion Contributors -->
    <completion.contributor language="TypeScript" implementationClass="tech.lssm.contractspec.completion.ContractSpecCompletionContributor" />
    <!-- File Type Associations -->
    <fileType name="ContractSpec Command" implementationClass="com.intellij.javascript.JavaScriptFileType" fieldName="INSTANCE" language="TypeScript" extensions="contracts.ts" />
    <fileType name="ContractSpec Query" implementationClass="com.intellij.javascript.JavaScriptFileType" fieldName="INSTANCE" language="TypeScript" extensions="contracts.ts" />
    <fileType name="ContractSpec Event" implementationClass="com.intellij.javascript.JavaScriptFileType" fieldName="INSTANCE" language="TypeScript" extensions="event.ts" />
    <fileType name="ContractSpec Presentation" implementationClass="com.intellij.javascript.JavaScriptFileType" fieldName="INSTANCE" language="TypeScript" extensions="presentation.ts" />
    <fileType name="ContractSpec Feature" implementationClass="com.intellij.javascript.JavaScriptFileType" fieldName="INSTANCE" language="TypeScript" extensions="feature.ts" />
    <fileType name="ContractSpec Workflow" implementationClass="com.intellij.javascript.JavaScriptFileType" fieldName="INSTANCE" language="TypeScript" extensions="workflow.ts" />
    <fileType name="ContractSpec Data View" implementationClass="com.intellij.javascript.JavaScriptFileType" fieldName="INSTANCE" language="TypeScript" extensions="data-view.ts" />
    <fileType name="ContractSpec Form" implementationClass="com.intellij.javascript.JavaScriptFileType" fieldName="INSTANCE" language="TypeScript" extensions="form.ts" />
    <fileType name="ContractSpec Migration" implementationClass="com.intellij.javascript.JavaScriptFileType" fieldName="INSTANCE" language="TypeScript" extensions="migration.ts" />
    <fileType name="ContractSpec Telemetry" implementationClass="com.intellij.javascript.JavaScriptFileType" fieldName="INSTANCE" language="TypeScript" extensions="telemetry.ts" />
    <fileType name="ContractSpec Experiment" implementationClass="com.intellij.javascript.JavaScriptFileType" fieldName="INSTANCE" language="TypeScript" extensions="experiment.ts" />
    <fileType name="ContractSpec App Config" implementationClass="com.intellij.javascript.JavaScriptFileType" fieldName="INSTANCE" language="TypeScript" extensions="app-config.ts" />
    <fileType name="ContractSpec Integration" implementationClass="com.intellij.javascript.JavaScriptFileType" fieldName="INSTANCE" language="TypeScript" extensions="integration.ts" />
    <fileType name="ContractSpec Knowledge" implementationClass="com.intellij.javascript.JavaScriptFileType" fieldName="INSTANCE" language="TypeScript" extensions="knowledge.ts" />
    <fileType name="ContractSpec Policy" implementationClass="com.intellij.javascript.JavaScriptFileType" fieldName="INSTANCE" language="TypeScript" extensions="policy.ts" />
    <fileType name="ContractSpec Test Spec" implementationClass="com.intellij.javascript.JavaScriptFileType" fieldName="INSTANCE" language="TypeScript" extensions="test-spec.ts" />
    <!-- Application Service -->
    <applicationService serviceInterface="tech.lssm.contractspec.bridge.NodeBridgeService" serviceImplementation="tech.lssm.contractspec.bridge.NodeBridgeServiceImpl" />
    <!-- Project Service -->
    <projectService serviceInterface="tech.lssm.contractspec.settings.ContractSpecSettings" serviceImplementation="tech.lssm.contractspec.settings.ContractSpecSettingsImpl" />
    <!-- Status Bar Widget -->
    <statusBarWidgetProvider implementation="tech.lssm.contractspec.ui.ContractSpecStatusBarWidgetProvider" />
  </extensions>
  <actions>
    <!-- Spec Management -->
    <group id="ContractSpec.SpecManagement" text="ContractSpec" description="ContractSpec operations" popup="true">
      <action id="contractspec.validate" class="tech.lssm.contractspec.actions.ValidateAction" text="Validate Current Spec" description="Validate the currently open spec file" icon="/icons/validate.svg">
        <keyboard-shortcut keymap="$default" first-keystroke="ctrl alt V" />
      </action>
      <action id="contractspec.validateWorkspace" class="tech.lssm.contractspec.actions.ValidateWorkspaceAction" text="Validate All Specs in Workspace" description="Validate all spec files in the workspace" icon="/icons/validate.svg" />
      <action id="contractspec.build" class="tech.lssm.contractspec.actions.BuildAction" text="Build/Scaffold from Current Spec" description="Generate handler/component from the current spec" icon="/icons/build.svg">
        <keyboard-shortcut keymap="$default" first-keystroke="ctrl alt B" />
      </action>
      <action id="contractspec.listSpecs" class="tech.lssm.contractspec.actions.ListSpecsAction" text="List All Specs" description="Show all specs in the workspace" icon="/icons/list.svg" />
    </group>
    <!-- Build & Sync -->
    <group id="ContractSpec.BuildSync" text="ContractSpec Build &amp; Sync" description="Build and synchronization operations" popup="true">
      <action id="contractspec.watchToggle" class="tech.lssm.contractspec.actions.WatchToggleAction" text="Toggle Watch Mode" description="Auto-rebuild/validate on changes" icon="/icons/watch.svg" />
      <action id="contractspec.sync" class="tech.lssm.contractspec.actions.SyncAction" text="Sync All Specs" description="Build all specs in workspace" icon="/icons/sync.svg" />
      <action id="contractspec.clean" class="tech.lssm.contractspec.actions.CleanAction" text="Clean Generated Files" description="Remove generated artifacts" icon="/icons/clean.svg" />
    </group>
    <!-- Analysis & Comparison -->
    <group id="ContractSpec.Analysis" text="ContractSpec Analysis" description="Analysis and comparison operations" popup="true">
      <action id="contractspec.analyzeDeps" class="tech.lssm.contractspec.actions.AnalyzeDepsAction" text="Analyze Spec Dependencies" description="Analyze and visualize spec dependencies" icon="/icons/deps.svg" />
      <action id="contractspec.diff" class="tech.lssm.contractspec.actions.CompareSpecsAction" text="Compare Specs" description="Compare two specs (semantic or text)" icon="/icons/diff.svg" />
      <action id="contractspec.diffGit" class="tech.lssm.contractspec.actions.CompareWithGitAction" text="Compare with Git Version" description="Compare spec with git baseline" icon="/icons/git.svg" />
      <action id="contractspec.openapi" class="tech.lssm.contractspec.actions.ExportToOpenApiAction" text="Export to OpenAPI" description="Generate OpenAPI specification" icon="/icons/export.svg" />
    </group>
    <!-- Registry & Examples -->
    <group id="ContractSpec.Registry" text="ContractSpec Registry" description="Registry and examples operations" popup="true">
      <action id="contractspec.registryBrowse" class="tech.lssm.contractspec.actions.BrowseRegistryAction" text="Browse Registry" description="Browse public spec registry" icon="/icons/registry.svg" />
      <action id="contractspec.registryAdd" class="tech.lssm.contractspec.actions.AddFromRegistryAction" text="Add from Registry" description="Install spec from registry" icon="/icons/add.svg" />
      <action id="contractspec.registrySearch" class="tech.lssm.contractspec.actions.SearchRegistryAction" text="Search Registry" description="Search registry specs" icon="/icons/search.svg" />
      <action id="contractspec.examplesBrowse" class="tech.lssm.contractspec.actions.BrowseExamplesAction" text="Browse Examples" description="Browse example specs" icon="/icons/examples.svg" />
      <action id="contractspec.examplesInit" class="tech.lssm.contractspec.actions.InitExampleAction" text="Initialize Example Stub in Workspace" description="Initialize example in workspace" icon="/icons/init.svg" />
      <action id="contractspec.searchDocs" class="tech.lssm.contractspec.actions.SearchDocsAction" text="Search ContractSpec Docs (MCP)" description="Search documentation via MCP" icon="/icons/docs.svg" />
    </group>
    <!-- LLM Tools -->
    <group id="ContractSpec.LLM" text="ContractSpec LLM Tools" description="AI and LLM integration tools" popup="true">
      <action id="contractspec.llmExport" class="tech.lssm.contractspec.actions.LLMExportAction" text="Export to LLM" description="Export spec for AI assistant" icon="/icons/export.svg" />
      <action id="contractspec.llmGuide" class="tech.lssm.contractspec.actions.LLMGuideAction" text="Generate Implementation Guide" description="Generate implementation guide" icon="/icons/guide.svg" />
      <action id="contractspec.llmVerify" class="tech.lssm.contractspec.actions.LLMVerifyAction" text="Verify Implementation" description="Verify implementation against spec" icon="/icons/verify.svg" />
      <action id="contractspec.llmCopy" class="tech.lssm.contractspec.actions.LLMCopyAction" text="Copy Spec for LLM" description="Copy spec content for LLM context" icon="/icons/copy.svg" />
    </group>
    <!-- Project Management -->
    <group id="ContractSpec.Project" text="ContractSpec Project" description="Project management operations" popup="true">
      <action id="contractspec.create" class="tech.lssm.contractspec.actions.CreateSpecAction" text="Create New Spec" description="Interactive spec creation wizard" icon="/icons/add.svg">
        <keyboard-shortcut keymap="$default" first-keystroke="ctrl alt N" />
      </action>
      <action id="contractspec.setup" class="tech.lssm.contractspec.actions.SetupAction" text="Setup ContractSpec" description="Run setup wizard" icon="/icons/setup.svg" />
      <action id="contractspec.quickSetup" class="tech.lssm.contractspec.actions.QuickSetupAction" text="Quick Setup (Defaults)" description="Quick setup with defaults" icon="/icons/quick-setup.svg" />
      <action id="contractspec.doctor" class="tech.lssm.contractspec.actions.DoctorAction" text="Run Health Check (Doctor)" description="Run diagnostics and checks" icon="/icons/doctor.svg" />
      <action id="contractspec.workspaceInfo" class="tech.lssm.contractspec.actions.WorkspaceInfoAction" text="Show Workspace Info" description="Display workspace information" icon="/icons/info.svg" />
    </group>
    <!-- Tool Window Actions -->
    <group id="ContractSpec.ToolWindow" text="ContractSpec Tool Windows" description="Tool window operations" popup="true">
      <action id="contractspec.refreshSpecs" class="tech.lssm.contractspec.actions.RefreshSpecsAction" text="Refresh Specs" description="Refresh specs view" icon="/icons/refresh.svg" />
      <action id="contractspec.refreshDeps" class="tech.lssm.contractspec.actions.RefreshDepsAction" text="Refresh Dependencies" description="Refresh dependencies view" icon="/icons/refresh.svg" />
      <action id="contractspec.clearBuildResults" class="tech.lssm.contractspec.actions.ClearBuildResultsAction" text="Clear Build Results" description="Clear build results history" icon="/icons/clear.svg" />
      <action id="contractspec.refreshIntegrity" class="tech.lssm.contractspec.actions.RefreshIntegrityAction" text="Refresh Integrity Analysis" description="Refresh integrity analysis" icon="/icons/refresh.svg" />
      <action id="contractspec.refreshLLMTools" class="tech.lssm.contractspec.actions.RefreshLLMToolsAction" text="Refresh LLM Tools" description="Refresh LLM tools view" icon="/icons/refresh.svg" />
    </group>
    <!-- Context Menu Actions -->
    <group id="ContractSpec.EditorPopup" text="ContractSpec" description="ContractSpec editor actions" popup="true">
      <reference ref="contractspec.validate" />
      <reference ref="contractspec.build" />
      <reference ref="contractspec.analyzeIntegrity" />
      <reference ref="contractspec.llmExport" />
      <reference ref="contractspec.llmGuide" />
      <reference ref="contractspec.llmCopy" />
      <separator />
      <reference ref="contractspec.diff" />
    </group>
    <!-- Project View Context Menu -->
    <group id="ContractSpec.ProjectViewPopup" text="ContractSpec" description="ContractSpec project view actions" popup="true">
      <reference ref="contractspec.validate" />
      <reference ref="contractspec.build" />
      <reference ref="contractspec.diff" />
      <reference ref="contractspec.analyzeIntegrity" />
    </group>
  </actions>
  <!-- Main menu integration -->
  <actions>
    <group id="ToolsMenu" />
    <add-to-group group-id="ToolsMenu" anchor="last">
      <group id="ContractSpec.MainMenu" text="ContractSpec" description="ContractSpec operations">
        <reference ref="ContractSpec.SpecManagement" />
        <reference ref="ContractSpec.BuildSync" />
        <reference ref="ContractSpec.Analysis" />
        <reference ref="ContractSpec.Registry" />
        <reference ref="ContractSpec.LLM" />
        <reference ref="ContractSpec.Project" />
        <separator />
        <reference ref="ContractSpec.ToolWindow" />
      </group>
    </add-to-group>
  </actions>
  <!-- Editor popup menu -->
  <actions>
    <group id="EditorPopupMenu" />
    <add-to-group group-id="EditorPopupMenu" anchor="last">
      <group id="ContractSpec.EditorMenu" text="ContractSpec" description="ContractSpec editor operations">
        <reference ref="ContractSpec.EditorPopup" />
      </group>
    </add-to-group>
  </actions>
  <!-- Project view popup menu -->
  <actions>
    <group id="ProjectViewPopupMenu" />
    <add-to-group group-id="ProjectViewPopupMenu" anchor="last">
      <group id="ContractSpec.ProjectMenu" text="ContractSpec" description="ContractSpec project operations">
        <reference ref="ContractSpec.ProjectViewPopup" />
      </group>
    </add-to-group>
  </actions>
</idea-plugin>
