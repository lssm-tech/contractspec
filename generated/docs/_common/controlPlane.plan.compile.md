<!-- @generated - This file was generated by ContractSpec. Do not edit manually. -->

# controlPlane.plan.compile

Compile an intent into a deterministic plan DAG.

## Metadata

- **Type**: operation (command)
- **Version**: 1.0.0
- **Tags**: plan
- **File**: `packages/libs/contracts-spec/src/control-plane/commands/controlPlanePlanCompile.command.ts`

## Goal

Prevent freeform tool execution by requiring typed plan compilation.

## Context

Executed after intent submission to produce executable, traceable steps.

## Source Definition

```typescript
export const ControlPlanePlanCompileCommand = defineCommand({
  meta: {
    key: 'controlPlane.plan.compile',
    title: 'Compile Plan',
    version: '1.0.0',
    description: 'Compile an intent into a deterministic plan DAG.',
    goal: 'Prevent freeform tool execution by requiring typed plan compilation.',
    context:
      'Executed after intent submission to produce executable, traceable steps.',
    domain: CONTROL_PLANE_DOMAIN,
    owners: CONTROL_PLANE_OWNERS,
    tags: [...CONTROL_PLANE_TAGS, 'plan'],
    stability: CONTROL_PLANE_STABILITY,
  },
  capability: {
    key: 'control-plane.core',
    version: '1.0.0',
  },
  io: {
    input: ControlPlanePlanCompileInput,
    output: ControlPlanePlanCompileOutput,
    errors: {
      INTENT_NOT_FOUND: {
        description: 'The referenced intent does not exist.',
        http: 404,
        when: 'intentId cannot be resolved for the execution context.',
      },
    },
  },
  policy: {
    auth: 'admin',
    pii: [],
  },
  sideEffects: {
    emits: [
      {
        ref: ControlPlanePlanCompiledEvent.meta,
        when: 'Plan compilation completes with a valid deterministic DAG.',
      },
    ],
  },
});
```
