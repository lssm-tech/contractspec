# Product Intent Example

Website: https://contractspec.io/

Minimal example showing a transcript-to-tickets workflow with evidence-backed citations and a deterministic impact report.

## What it demonstrates

- Loading interview, ticket, and public thread transcripts from `evidence/`.
- Chunking transcripts into evidence chunks with stable ids.
- Extracting evidence findings with exact-quote citations.
- Grouping problems linked to evidence finding IDs.
- Generating tickets with evidence links + acceptance criteria.
- Producing a deterministic impact report from the patch intent.

## Running the script

From the repository root:

```bash
bun install
export CONTRACTSPEC_AI_PROVIDER="mistral" # or openai/anthropic/gemini/ollama
export MISTRAL_API_KEY="your_key"          # if using mistral
# export OPENAI_API_KEY="your_key"         # if using openai
# export CONTRACTSPEC_AI_MODEL="model-id"  # optional override
# export CONTRACTSPEC_AI_TEMPERATURE="0"   # default is 0 for determinism
# export CONTRACTSPEC_AI_MAX_ATTEMPTS="2"  # retry invalid JSON
bun tsx packages/examples/product-intent/src/script.ts
```

You should see evidence findings, problems, tickets, a patch intent generated by the AI provider, and a deterministic impact report.
If validation fails, inspect the JSONL trace log and artifacts in `packages/examples/product-intent/logs/run-*/`.

## Sync actions to project management tools

This example can convert tickets into shareable work items and sync them to Linear, Jira Cloud, or Notion:

```bash
export CONTRACTSPEC_PM_PROVIDER="linear" # or jira/notion
export CONTRACTSPEC_PM_DRY_RUN="true"    # set to false to create real items
export LINEAR_API_KEY="your_key"
export LINEAR_TEAM_ID="team_id"
export LINEAR_PROJECT_ID="project_id"    # optional
export LINEAR_LABEL_IDS="label1,label2"  # optional

# Jira Cloud
# export JIRA_SITE_URL="https://acme.atlassian.net"
# export JIRA_EMAIL="user@acme.com"
# export JIRA_API_TOKEN="jira_token"
# export JIRA_PROJECT_KEY="PM"

# Notion
# export NOTION_API_KEY="secret"
# export NOTION_DATABASE_ID="database_id"
# export NOTION_SUMMARY_PARENT_PAGE_ID="parent_page_id" # optional

bun tsx packages/examples/product-intent/src/sync-actions.ts
```
