<?xml version="1.0" encoding="UTF-8"?>
<templateSet group="ContractSpec">
    <template name="contractspec-command" value="import { defineCommand } from '@lssm/lib.contracts';&#10;import { defineSchemaModel, ScalarTypeEnum } from '@lssm/lib.schema';&#10;&#10;const ${CommandName}Input = defineSchemaModel({&#10;  name: '${CommandName}Input',&#10;  fields: {&#10;    ${fieldName}: { type: ScalarTypeEnum.String_unsecure(), isOptional: false },&#10;  },&#10;});&#10;&#10;const ${CommandName}Output = defineSchemaModel({&#10;  name: '${CommandName}Output',&#10;  fields: {&#10;    ok: { type: ScalarTypeEnum.Boolean(), isOptional: false },&#10;  },&#10;});&#10;&#10;export const ${CommandName}Spec = defineCommand({&#10;  meta: {&#10;    name: '${domain}.${operationName}',&#10;    version: 1,&#10;    stability: 'experimental',&#10;    owners: ['@${team}'],&#10;    tags: ['${tag}'],&#10;    description: '${description}',&#10;    goal: '${goal}',&#10;    context: '${context}',&#10;  },&#10;&#10;  io: {&#10;    input: ${CommandName}Input,&#10;    output: ${CommandName}Output,&#10;    errors: {&#10;      // Define possible errors&#10;    },&#10;  },&#10;&#10;  policy: {&#10;    auth: '${auth}',&#10;  },&#10;&#10;  transport: {&#10;    rest: { method: 'POST' },&#10;  },&#10;});" description="Create a new ContractSpec command (write operation)" toReformat="false" toShortenFQNames="true">
        <variable name="CommandName" expression="" defaultValue="MyCommand" alwaysStopAt="true" />
        <variable name="fieldName" expression="" defaultValue="fieldName" alwaysStopAt="true" />
        <variable name="domain" expression="" defaultValue="myapp" alwaysStopAt="true" />
        <variable name="operationName" expression="" defaultValue="myOperation" alwaysStopAt="true" />
        <variable name="team" expression="" defaultValue="team" alwaysStopAt="true" />
        <variable name="tag" expression="" defaultValue="feature" alwaysStopAt="true" />
        <variable name="description" expression="" defaultValue="Short description of what this command does" alwaysStopAt="true" />
        <variable name="goal" expression="" defaultValue="Business goal this command achieves" alwaysStopAt="true" />
        <variable name="context" expression="" defaultValue="Background and constraints" alwaysStopAt="true" />
        <variable name="auth" expression="" defaultValue="user" alwaysStopAt="true" />
        <context>
            <option name="TypeScript" value="true" />
        </context>
    </template>

    <template name="contractspec-query" value="import { defineQuery } from '@lssm/lib.contracts';&#10;import { defineSchemaModel, ScalarTypeEnum } from '@lssm/lib.schema';&#10;&#10;const ${QueryName}Input = defineSchemaModel({&#10;  name: '${QueryName}Input',&#10;  fields: {&#10;    ${fieldName}: { type: ScalarTypeEnum.String_unsecure(), isOptional: true },&#10;  },&#10;});&#10;&#10;const ${QueryName}Output = defineSchemaModel({&#10;  name: '${QueryName}Output',&#10;  fields: {&#10;    items: { type: ScalarTypeEnum.String_unsecure(), isOptional: false, isArray: true },&#10;  },&#10;});&#10;&#10;export const ${QueryName}Spec = defineQuery({&#10;  meta: {&#10;    name: '${domain}.${operationName}',&#10;    version: 1,&#10;    stability: 'experimental',&#10;    owners: ['@${team}'],&#10;    tags: ['${tag}'],&#10;    description: '${description}',&#10;    goal: '${goal}',&#10;    context: '${context}',&#10;  },&#10;&#10;  io: {&#10;    input: ${QueryName}Input,&#10;    output: ${QueryName}Output,&#10;  },&#10;&#10;  policy: {&#10;    auth: '${auth}',&#10;  },&#10;&#10;  transport: {&#10;    rest: { method: 'GET' },&#10;  },&#10;});" description="Create a new ContractSpec query (read-only operation)" toReformat="false" toShortenFQNames="true">
        <variable name="QueryName" expression="" defaultValue="MyQuery" alwaysStopAt="true" />
        <variable name="fieldName" expression="" defaultValue="fieldName" alwaysStopAt="true" />
        <variable name="domain" expression="" defaultValue="myapp" alwaysStopAt="true" />
        <variable name="operationName" expression="" defaultValue="myOperation" alwaysStopAt="true" />
        <variable name="team" expression="" defaultValue="team" alwaysStopAt="true" />
        <variable name="tag" expression="" defaultValue="feature" alwaysStopAt="true" />
        <variable name="description" expression="" defaultValue="Short description of what this query returns" alwaysStopAt="true" />
        <variable name="goal" expression="" defaultValue="Business goal this query serves" alwaysStopAt="true" />
        <variable name="context" expression="" defaultValue="Background and constraints" alwaysStopAt="true" />
        <variable name="auth" expression="" defaultValue="user" alwaysStopAt="true" />
        <context>
            <option name="TypeScript" value="true" />
        </context>
    </template>

    <template name="contractspec-event" value="import { defineEvent } from '@lssm/lib.contracts';&#10;import { defineSchemaModel, ScalarTypeEnum } from '@lssm/lib.schema';&#10;&#10;const ${EventName}Payload = defineSchemaModel({&#10;  name: '${EventName}Payload',&#10;  fields: {&#10;    ${fieldName}: { type: ScalarTypeEnum.String_unsecure(), isOptional: false },&#10;  },&#10;});&#10;&#10;export const ${EventName}Event = defineEvent({&#10;  name: '${domain}.${event_name}',&#10;  version: 1,&#10;  description: '${description}',&#10;  payload: ${EventName}Payload,&#10;  pii: [],&#10;});" description="Create a new ContractSpec event" toReformat="false" toShortenFQNames="true">
        <variable name="EventName" expression="" defaultValue="MyEvent" alwaysStopAt="true" />
        <variable name="fieldName" expression="" defaultValue="fieldName" alwaysStopAt="true" />
        <variable name="domain" expression="" defaultValue="myapp" alwaysStopAt="true" />
        <variable name="event_name" expression="" defaultValue="myEvent" alwaysStopAt="true" />
        <variable name="description" expression="" defaultValue="Describes when this event is emitted" alwaysStopAt="true" />
        <context>
            <option name="TypeScript" value="true" />
        </context>
    </template>

    <template name="contractspec-presentation" value="import type { PresentationSpec } from '@lssm/lib.contracts/presentations';&#10;&#10;export const ${PresentationName}Presentation: PresentationSpec = {&#10;  meta: {&#10;    name: '${domain}.${presentation_name}',&#10;    version: 1,&#10;    description: '${description}',&#10;    owners: ['@${team}'],&#10;    tags: ['${tag}'],&#10;  },&#10;  content: {&#10;    kind: 'web_component',&#10;    // TODO: Define presentation content&#10;  },&#10;};&#10;" description="Create a new ContractSpec Presentation" toReformat="false" toShortenFQNames="true">
        <variable name="PresentationName" expression="" defaultValue="MyPresentation" alwaysStopAt="true" />
        <variable name="domain" expression="" defaultValue="myapp" alwaysStopAt="true" />
        <variable name="presentation_name" expression="" defaultValue="myPresentation" alwaysStopAt="true" />
        <variable name="description" expression="" defaultValue="Description of this presentation" alwaysStopAt="true" />
        <variable name="team" expression="" defaultValue="team" alwaysStopAt="true" />
        <variable name="tag" expression="" defaultValue="feature" alwaysStopAt="true" />
        <context>
            <option name="TypeScript" value="true" />
        </context>
    </template>

    <template name="contractspec-docblock" value="import type { DocBlock } from '@lssm/lib.contracts/docs';&#10;import { registerDocBlocks } from '@lssm/lib.contracts/docs';&#10;&#10;export const ${docblock_name}_DocBlocks: DocBlock[] = [&#10;  {&#10;    id: '${docs.category.name}',&#10;    title: '${Title}',&#10;    summary: '${summary}',&#10;    kind: '${kind}',&#10;    visibility: '${visibility}',&#10;    route: '/docs/${category}/${name}',&#10;    tags: ['${tag}'],&#10;    body: `# ${'$'}Title&#10;&#10;${'$'}body&#10;`,&#10;  },&#10;];&#10;&#10;registerDocBlocks(${docblock_name}_DocBlocks);&#10;" description="Create a new ContractSpec DocBlock" toReformat="false" toShortenFQNames="true">
        <variable name="docblock_name" expression="" defaultValue="myDocBlock" alwaysStopAt="true" />
        <variable name="Title" expression="" defaultValue="Title" alwaysStopAt="true" />
        <variable name="summary" expression="" defaultValue="Brief summary of this documentation" alwaysStopAt="true" />
        <variable name="kind" expression="enum(&quot;reference&quot;,&quot;guide&quot;,&quot;tutorial&quot;,&quot;api&quot;)" defaultValue="reference" alwaysStopAt="true" />
        <variable name="visibility" expression="enum(&quot;public&quot;,&quot;internal&quot;,&quot;mixed&quot;)" defaultValue="public" alwaysStopAt="true" />
        <variable name="category" expression="" defaultValue="category" alwaysStopAt="true" />
        <variable name="name" expression="" defaultValue="name" alwaysStopAt="true" />
        <variable name="tag" expression="" defaultValue="tag" alwaysStopAt="true" />
        <variable name="body" expression="" defaultValue="Documentation content in markdown" alwaysStopAt="true" />
        <context>
            <option name="TypeScript" value="true" />
        </context>
    </template>

    <template name="contractspec-telemetry" value="import type { TelemetrySpec } from '@lssm/lib.contracts/telemetry';&#10;import { StabilityEnum } from '@lssm/lib.contracts';&#10;&#10;export const ${name}Telemetry: TelemetrySpec = {&#10;  meta: {&#10;    name: '${domain}.telemetry',&#10;    version: 1,&#10;    title: '${Title} Telemetry',&#10;    description: '${description}',&#10;    domain: '${domain}',&#10;    owners: ['@${team}'],&#10;    tags: ['telemetry'],&#10;    stability: StabilityEnum.Experimental,&#10;  },&#10;  config: {&#10;    defaultRetentionDays: 30,&#10;    defaultSamplingRate: 1,&#10;  },&#10;  events: [&#10;    {&#10;      name: '${domain}.${event_name}',&#10;      version: 1,&#10;      semantics: {&#10;        what: '${what}',&#10;        who: '${who}',&#10;      },&#10;      properties: {&#10;        ${property}: { type: 'string', required: true },&#10;      },&#10;      privacy: '${privacy}',&#10;    },&#10;  ],&#10;};&#10;" description="Create a new ContractSpec TelemetrySpec" toReformat="false" toShortenFQNames="true">
        <variable name="name" expression="" defaultValue="MyTelemetry" alwaysStopAt="true" />
        <variable name="domain" expression="" defaultValue="myapp" alwaysStopAt="true" />
        <variable name="Title" expression="" defaultValue="Title" alwaysStopAt="true" />
        <variable name="description" expression="" defaultValue="Description of telemetry events" alwaysStopAt="true" />
        <variable name="team" expression="" defaultValue="team" alwaysStopAt="true" />
        <variable name="event_name" expression="" defaultValue="myEvent" alwaysStopAt="true" />
        <variable name="what" expression="" defaultValue="What happened" alwaysStopAt="true" />
        <variable name="who" expression="" defaultValue="Who performed the action" alwaysStopAt="true" />
        <variable name="property" expression="" defaultValue="property" alwaysStopAt="true" />
        <variable name="privacy" expression="enum(&quot;internal&quot;,&quot;public&quot;,&quot;pii&quot;,&quot;sensitive&quot;)" defaultValue="internal" alwaysStopAt="true" />
        <context>
            <option name="TypeScript" value="true" />
        </context>
    </template>
</templateSet>


